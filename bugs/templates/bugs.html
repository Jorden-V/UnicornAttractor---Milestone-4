{% extends 'base.html' %} {% block content %} {% load bootstrap_tags %}
<div class="parallax-bugs">
  <section class="container main-message">
    <div class="jumbotron">
      <h1 class="display-4">View, submit and discuss bugs below</h1>
    </div>
  </section>
</div>

<section class="container">
  <div class="row">
    <div class="profile-submit-buttons">
      <a href="{% url 'new_bug' %}"><button type="button" class="btn btn-primary"> Submit Bug</button></a>
    </div>
  </div>


  {% for bug in bugs %}
  <div class="card mb-3">
    <div class="card-header"><strong>{{bug.name}}</strong><span class="card-link"> {{ bug.created_date }} </span></div>
    <div class="progress">
      {% if bug.status == "To do" %}
      <div class="progress-bar progress-bar-striped bg-secondary" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"> To Do</div>
      {% elif bug.status == "In progress" %}
      <div class="progress-bar progress-bar-striped bg-primary" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"> In Progess</div>
      {% elif bug.status == "Cancelled" %}
      <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">Cancelled</div>
      {% else %}
      <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">Complete</div>
      {% endif %}
    </div>
    <div class="card-body">
      <p class="card-text">{{bug.desc}}</p>
      <h6 class="card-subtitle text-muted">Author: {{ bug.author }} </h6>
    </div>
    <div class="card-footer text-muted">
      <i class="far fa-eye"> {{ bug.views }} </i> {% if user.is_authenticated %}
      <a href="{% url 'upvote_bug' bug.id %}"> <i class="fas fa-arrow-up"> {{bug.upvotes}} </i></a> {% csrf_token %}
      <a href="{% url 'bug_detail' bug.id %}"><i class="far fa-comment"> ({{ bug.comment_number }}) </i></a> {% else %}
      <i class="fas fa-arrow-up"> {{bug.upvotes}} </i>
      <i class="far fa-comment"> ({{ bug.comment_number }}) </i> {% endif %}
      <a class="btn btn btn-primary" href="{% url 'bug_detail' bug.id %}" role="button">View</a>
    </div>
  </div>
{% endfor %}


</section>
{% endblock %}
